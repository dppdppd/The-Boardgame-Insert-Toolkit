{
  "version": "4.00",
  "types": {
    "bool": "Checkbox (true/false)",
    "number": "Numeric input",
    "string": "Text input",
    "enum": "Dropdown of predefined values",
    "xy": "Two numeric inputs [x, y]",
    "xyz": "Three numeric inputs [x, y, z]",
    "4bool": "Four checkboxes [front, back, left, right]",
    "4num": "Four numeric inputs [front, back, left, right]",
    "table": "Nested key-value table (single)",
    "table_list": "List of nested key-value tables",
    "string_list": "List of strings",
    "position_xy": "Two inputs: each is number, CENTER, or MAX"
  },
  "contexts": {
    "element": {
      "description": "Top-level element (BOX, DIVIDERS, or SPACER)",
      "keys": {
        "NAME":              { "type": "string", "default": "", "help": "Display name for the element" },
        "BOX_SIZE_XYZ":      { "type": "xyz", "default": [100, 100, 30], "help": "Box outer dimensions [x, y, z]. Omit to auto-calculate.", "contexts": ["BOX", "SPACER"] },
        "BOX_FEATURE":     { "type": "table_list", "child_context": "feature", "help": "List of compartment components", "contexts": ["BOX", "SPACER"] },
        "BOX_LID":           { "type": "table", "child_context": "lid", "help": "Lid parameters", "contexts": ["BOX"] },
        "BOX_NO_LID_B":      { "type": "bool", "default": false, "help": "If true, no lid is generated", "contexts": ["BOX"] },
        "BOX_STACKABLE_B":   { "type": "bool", "default": false, "help": "If true, box has stacking features (forces inset lid)", "contexts": ["BOX"] },
        "BOX_WALL_THICKNESS":{ "type": "number", "default": 1.5, "help": "Wall thickness in mm (overrides global)", "contexts": ["BOX", "SPACER"] },
        "ENABLED_B":         { "type": "bool", "default": true, "help": "If false, element is skipped" },
        "_DEBUG_B":           { "type": "bool", "default": false, "help": "If true, geometry is rendered with # debug modifier (transparent red)" },
        "LABEL":             { "type": "table", "child_context": "label", "help": "Box-level label", "contexts": ["BOX"] }
      }
    },
    "feature": {
      "description": "Feature (inside BOX_FEATURE)",
      "keys": {
        "NAME":                      { "type": "string", "default": "", "help": "Display name for the feature" },
        "FTR_COMPARTMENT_SIZE_XYZ":  { "type": "xyz", "default": [10, 10, 10], "help": "Compartment inner size [x, y, z]" },
        "FTR_NUM_COMPARTMENTS_XY":   { "type": "xy", "default": [1, 1], "help": "Grid of compartments [columns, rows]" },
        "FTR_SHAPE":                 { "type": "enum", "values": ["SQUARE", "HEX", "HEX2", "OCT", "OCT2", "ROUND", "FILLET"], "default": "SQUARE", "help": "Compartment shape" },
        "FTR_SHAPE_ROTATED_B":       { "type": "bool", "default": false, "help": "Rotate shape 90 degrees" },
        "FTR_SHAPE_VERTICAL_B":      { "type": "bool", "default": false, "help": "Extrude shape vertically instead of up" },
        "FTR_PADDING_XY":            { "type": "xy", "default": [1.0, 1.0], "help": "Padding between compartments [x, y]" },
        "FTR_PADDING_HEIGHT_ADJUST_XY": { "type": "xy", "default": [0.0, 0.0], "help": "Height adjustment for padding walls [x, y]" },
        "FTR_MARGIN_FBLR":           { "type": "4num", "default": [0, 0, 0, 0], "help": "Extra margin [front, back, left, right] in mm" },
        "FTR_CUTOUT_SIDES_4B":       { "type": "4bool", "default": [false, false, false, false], "help": "Finger cutouts on [front, back, left, right]" },
        "FTR_CUTOUT_CORNERS_4B":     { "type": "4bool", "default": [false, false, false, false], "help": "Corner cutouts [FL, BR, BL, FR]" },
        "FTR_CUTOUT_HEIGHT_PCT":     { "type": "number", "default": 100, "help": "Cutout height as % of compartment height" },
        "FTR_CUTOUT_DEPTH_PCT":      { "type": "number", "default": 25, "help": "Cutout depth as % of compartment depth" },
        "FTR_CUTOUT_WIDTH_PCT":      { "type": "number", "default": 50, "help": "Cutout width as % of compartment width" },
        "FTR_CUTOUT_BOTTOM_B":       { "type": "bool", "default": false, "help": "If true, add bottom cutout for pushing pieces out" },
        "FTR_CUTOUT_BOTTOM_PCT":     { "type": "number", "default": 80, "help": "Bottom cutout size as % of compartment" },
        "FTR_CUTOUT_TYPE":           { "type": "enum", "values": ["INTERIOR", "EXTERIOR", "BOTH"], "default": "BOTH", "help": "Where cutouts are applied" },
        "FTR_CUTOUT_DEPTH_MAX":      { "type": "number", "default": 0, "help": "Max cutout depth in mm (0 = no limit)" },
        "FTR_SHEAR":                 { "type": "xy", "default": [0.0, 0.0], "help": "Shear angle [x, y] in degrees" },
        "FTR_FILLET_RADIUS":         { "type": "number", "default": 10, "help": "Fillet radius for FILLET shape (capped at compartment height)" },
        "FTR_PEDESTAL_BASE_B":       { "type": "bool", "default": false, "help": "If true, compartment has pedestal push-out base" },
        "ENABLED_B":                 { "type": "bool", "default": true, "help": "If false, component is skipped" },
        "_DEBUG_B":                   { "type": "bool", "default": false, "help": "If true, feature geometry is rendered with # debug modifier (transparent red)" },
        "LABEL":                     { "type": "table", "child_context": "label", "help": "Component-level label" },
        "ROTATION":                  { "type": "number", "default": 0, "help": "Rotation in degrees" },
        "POSITION_XY":               { "type": "position_xy", "default": ["CENTER", "CENTER"], "help": "Position [x, y]. Accepts numbers, CENTER, or MAX." }
      }
    },
    "lid": {
      "description": "Lid parameters (inside BOX_LID)",
      "keys": {
        "NAME":                         { "type": "string", "default": "", "help": "Display name for the lid" },
        "LID_FIT_UNDER_B":              { "type": "bool", "default": true, "help": "Lid fits under the box (cap style)" },
        "LID_SOLID_B":                  { "type": "bool", "default": false, "help": "Solid lid (no pattern cutouts)" },
        "LID_HEIGHT":                   { "type": "number", "default": 4.0, "help": "Lid height in mm (default: 4 cap, 2 inset)" },
        "LID_INSET_B":                  { "type": "bool", "default": false, "help": "Inset lid (sits inside box walls)" },
        "LID_CUTOUT_SIDES_4B":          { "type": "4bool", "default": [false, false, false, false], "help": "Lid finger cutouts [front, back, left, right]" },
        "LID_TABS_4B":                  { "type": "4bool", "default": [true, true, true, true], "help": "Lid retention tabs [front, back, left, right]" },
        "LID_LABELS_INVERT_B":          { "type": "bool", "default": false, "help": "Invert label text (raised instead of recessed)" },
        "LID_SOLID_LABELS_DEPTH":       { "type": "number", "default": 0.5, "help": "Label depth on solid lids in mm" },
        "LID_LABELS_BG_THICKNESS":      { "type": "number", "default": 2.0, "help": "Label background thickness in mm" },
        "LID_LABELS_BORDER_THICKNESS":  { "type": "number", "default": 0.3, "help": "Label border thickness in mm" },
        "LID_STRIPE_WIDTH":             { "type": "number", "default": 0.5, "help": "Stripe width for striped pattern" },
        "LID_STRIPE_SPACE":             { "type": "number", "default": 1, "help": "Stripe spacing for striped pattern" },
        "LID_PATTERN_RADIUS":           { "type": "number", "default": 4.0, "help": "Pattern element radius" },
        "LID_PATTERN_N1":               { "type": "number", "default": 6, "help": "Pattern sides count 1" },
        "LID_PATTERN_N2":               { "type": "number", "default": 6, "help": "Pattern sides count 2" },
        "LID_PATTERN_ANGLE":            { "type": "number", "default": 30, "help": "Pattern rotation angle" },
        "LID_PATTERN_ROW_OFFSET":       { "type": "number", "default": 50, "help": "Pattern row offset %" },
        "LID_PATTERN_COL_OFFSET":       { "type": "number", "default": 100, "help": "Pattern column offset %" },
        "LID_PATTERN_THICKNESS":        { "type": "number", "default": 0.5, "help": "Pattern wall thickness" },
        "_DEBUG_B":                     { "type": "bool", "default": false, "help": "If true, lid geometry is rendered with # debug modifier (transparent red)" },
        "LABEL":                        { "type": "table", "child_context": "label", "help": "Lid label" }
      }
    },
    "label": {
      "description": "Label parameters (inside LABEL)",
      "keys": {
        "NAME":                { "type": "string", "default": "", "help": "Display name for the label" },
        "LBL_TEXT":            { "type": "string", "default": "", "help": "Label text (or list of strings for multi-line)" },
        "LBL_IMAGE":           { "type": "string", "default": "", "help": "Path to SVG/image file" },
        "LBL_SIZE":            { "type": "number", "default": "AUTO", "help": "Font size (number or AUTO)" },
        "LBL_PLACEMENT":       { "type": "enum", "values": ["FRONT", "BACK", "LEFT", "RIGHT", "FRONT_WALL", "BACK_WALL", "LEFT_WALL", "RIGHT_WALL", "CENTER", "BOTTOM"], "default": "CENTER", "help": "Where to place the label" },
        "LBL_FONT":            { "type": "string", "default": "Stencil Std:style=Bold", "help": "Font name" },
        "LBL_DEPTH":           { "type": "number", "default": 0.2, "help": "Label cut/emboss depth in mm" },
        "LBL_SPACING":         { "type": "number", "default": 1, "help": "Letter spacing" },
        "LBL_AUTO_SCALE_FACTOR": { "type": "number", "default": 1.2, "help": "Scale factor for AUTO size" },
        "ENABLED_B":           { "type": "bool", "default": true, "help": "If false, label is skipped" },
        "ROTATION":            { "type": "number", "default": 0, "help": "Label rotation in degrees" },
        "POSITION_XY":         { "type": "xy", "default": [0, 0], "help": "Label position offset [x, y]" }
      }
    },
    "divider": {
      "description": "Divider parameters (OBJECT_DIVIDERS)",
      "keys": {
        "NAME":                      { "type": "string", "default": "", "help": "Display name for the element" },
        "ENABLED_B":                 { "type": "bool", "default": true, "help": "If false, divider is skipped" },
        "DIV_THICKNESS":             { "type": "number", "default": 0.5, "help": "Divider card thickness in mm" },
        "DIV_TAB_SIZE_XY":           { "type": "xy", "default": [32, 14], "help": "Tab dimensions [width, height]" },
        "DIV_TAB_RADIUS":            { "type": "number", "default": 4, "help": "Tab corner radius" },
        "DIV_TAB_CYCLE":             { "type": "number", "default": 3, "help": "Number of tab positions before cycling" },
        "DIV_TAB_CYCLE_START":       { "type": "number", "default": 1, "help": "Starting position in tab cycle" },
        "DIV_TAB_TEXT":              { "type": "string_list", "default": ["001", "002", "003"], "help": "Tab label text (one per divider)" },
        "DIV_TAB_TEXT_SIZE":         { "type": "number", "default": 7, "help": "Tab text font size" },
        "DIV_TAB_TEXT_FONT":         { "type": "string", "default": "Stencil Std:style=Bold", "help": "Tab text font" },
        "DIV_TAB_TEXT_SPACING":      { "type": "number", "default": 1.1, "help": "Tab text letter spacing" },
        "DIV_TAB_TEXT_CHAR_THRESHOLD": { "type": "number", "default": 4, "help": "Auto-shrink text above this many characters" },
        "DIV_TAB_TEXT_EMBOSSED_B":   { "type": "bool", "default": false, "help": "Raised text (true) vs cut-through (false)" },
        "DIV_FRAME_SIZE_XY":         { "type": "xy", "default": [80, 80], "help": "Frame dimensions [width, height]" },
        "DIV_FRAME_TOP":             { "type": "number", "default": 10, "help": "Frame top border width" },
        "DIV_FRAME_BOTTOM":          { "type": "number", "default": 10, "help": "Frame bottom border width" },
        "DIV_FRAME_COLUMN":          { "type": "number", "default": 7, "help": "Frame column divider width" },
        "DIV_FRAME_RADIUS":          { "type": "number", "default": 4, "help": "Frame corner radius" },
        "DIV_FRAME_NUM_COLUMNS":     { "type": "number", "default": -1, "help": "Number of frame columns (-1 = auto)" }
      }
    }
  },
  "globals": {
    "g_b_print_lid":       { "type": "bool", "default": true, "help": "Print lid" },
    "g_b_print_box":       { "type": "bool", "default": true, "help": "Print box" },
    "g_isolated_print_box": { "type": "string", "default": "", "help": "Print only this named box" },
    "g_wall_thickness":    { "type": "number", "default": 1.5, "help": "Default wall thickness in mm" },
    "g_tolerance":         { "type": "number", "default": 0.1, "help": "Tolerance gap between fitting pieces" },
    "g_b_visualization":   { "type": "bool", "default": false, "help": "Show boxes assembled (visualization mode)" },
    "g_b_validate_keys":   { "type": "bool", "default": true, "help": "Warn about unknown/malformed keys" }
  }
}
